(function(t){function e(e){for(var s,r,i=e[0],c=e[1],l=e[2],u=0,m=[];u<i.length;u++)r=i[u],o[r]&&m.push(o[r][0]),o[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},o={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("64a9"),o=a.n(s);o.a},"06cf":function(t,e,a){t.exports=a.p+"img/gate.59ac3a28.png"},1174:function(t,e,a){"use strict";var s=a("c18c"),o=a.n(s);o.a},"1d4a":function(t,e,a){"use strict";var s=a("89b4"),o=a.n(s);o.a},"1f0e":function(t,e,a){},2115:function(t,e,a){"use strict";var s=a("ac1e"),o=a.n(s);o.a},"24f9":function(t,e,a){},3669:function(t,e,a){"use strict";var s=a("80fc"),o=a.n(s);o.a},"376d":function(t,e,a){},"3f28":function(t,e,a){},4195:function(t,e,a){},"473b":function(t,e,a){},"4d7d":function(t,e,a){"use strict";var s=a("24f9"),o=a.n(s);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("14c6"),a("08c1"),a("4842"),a("d9fc");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("AppHeader"),a("router-view"),a("AppFooter")],1)},n=[],r=a("cebc"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[s("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),s("b-navbar-brand",{attrs:{href:"#"}},[s("img",{attrs:{src:a("cf05"),alt:"Quatek"},on:{click:function(e){return t.toIndex()}}})]),s("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[s("b-navbar-nav",[s("b-nav-item",{attrs:{to:{name:"Index"},exact:""}},[t._v("Home Page")]),t.is_authenticated?s("b-nav-item",{attrs:{to:{name:"Gates"}}},[t._v("Gate List")]):t._e(),t.is_authenticated?s("b-nav-item",{attrs:{to:{name:"Cards"}}},[t._v("Card Management")]):t._e(),s("b-nav-item",{attrs:{to:{name:"CardTests"}}},[t._v("ESD Test")]),s("b-nav-item",{attrs:{to:{name:"real_time_data"}}},[t._v("Real-time Data")]),t.is_authenticated?s("b-nav-item",{attrs:{to:{name:"Config"}}},[t._v("Setting")]):t._e()],1),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-item-dropdown",{attrs:{right:""}},[s("template",{slot:"button-content"},[s("em",[t._v("My")])]),t.is_authenticated?t._e():s("b-dropdown-item",{attrs:{to:{name:"login"}}},[t._v("Login")]),t.is_authenticated?s("b-dropdown-item",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.logout()}}},[t._v("Log out")]):t._e()],2)],1)],1)],1)},c=[],l=a("2f62"),d={data:function(){return{}},computed:Object(r["a"])({},Object(l["c"])(["is_authenticated"])),methods:Object(r["a"])({toIndex:function(){this.$router.push({name:"Index"})}},Object(l["b"])(["logout"]))},u=d,m=(a("5c4a"),a("2877")),_=Object(m["a"])(u,i,c,!1,null,"eea233e2",null),p=_.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-center text-muted"},[t._v("Professional technology. Successful partnership.")])},v=[],g={},b=g,h=(a("e8bf"),Object(m["a"])(b,f,v,!1,null,"1f5976e2",null)),y=h.exports,C={components:{AppHeader:p,AppFooter:y},methods:Object(r["a"])({},Object(l["b"])(["init_jwt_token","logout"])),created:function(){this.init_jwt_token()},destroyed:function(){this.logout()}},k=C,w=(a("034f"),Object(m["a"])(k,o,n,!1,null,null,null)),x=w.exports,P=(a("7f7f"),a("6762"),a("8c4f")),$=(a("ac4d"),a("8a81"),a("ac6a"),a("bc3a")),N=a.n($),j=a("04e1");s["default"].use(l["a"]);var S=new l["a"].Store({state:{lastFailedUpload:[],jwt_token:localStorage.getItem("jwt_token")||"",all_cards:[],logs:[]},getters:{getLastFailedUpload:function(t){var e=!0,a=!1,s=void 0;try{for(var o,n=t.lastFailedUpload[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var r=o.value;r[0]=JSON.parse(r[0])}}catch(i){a=!0,s=i}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}return t.lastFailedUpload},get_jwt_token:function(t){return t.jwt_token},get_jwt_token_decoded:function(t){return t.jwt_token?j(t.jwt_token):null},is_authenticated:function(t){return!!t.jwt_token},get_logs:function(t){return t.logs.slice(0,100)}},mutations:{setLastFailedUpload:function(t,e){t.lastFailedUpload=e},setJwtToken:function(t,e){t.jwt_token=e,localStorage.setItem("jwt_token",e)},resetJwtToken:function(t){t.jwt_token="",localStorage.setItem("jwt_token","")},set_jwt_token:function(t,e){t.jwt_token=e,localStorage.setItem("jwt_token",e),N.a.defaults.headers.common["Authorization"]="Bearer ".concat(e)},set_jwt_token_to_localStorage_and_axios_headers:function(t){localStorage.setItem("jwt_token",t.jwt_token),N.a.defaults.headers.common["Authorization"]="Bearer ".concat(t.jwt_token)},delete_jwt_token:function(t){t.jwt_token="",localStorage.setItem("jwt_token",""),delete N.a.defaults.headers.common["Authorization"]},unshift_to_logs:function(t,e){e.mc_logs.forEach(function(e){t.logs.unshift(e)})}},actions:{init_jwt_token:function(t){var e=t.getters,a=t.commit,s=e.get_jwt_token_decoded;if(s){var o=new Date(1e3*s.exp);o<new Date?a("delete_jwt_token"):a("set_jwt_token_to_localStorage_and_axios_headers")}else a("delete_jwt_token")},login:function(t,e){var a=t.commit;return new Promise(function(t,s){N.a.post("/login",e).then(function(e){var s=e.data.access_token;a("set_jwt_token",s),Fe.push({name:"Index"}),t(e)}).catch(function(t){a("delete_jwt_token"),s(t)})})},register:function(t,e){var a=t.commit;return new Promise(function(t,s){N.a.post("/register",e).then(function(e){var s=e.data.access_token;a("set_jwt_token",s),Fe.push({name:"Index"}),t(e)}).catch(function(t){a("delete_jwt_token"),s(t)})})},logout:function(t){var e=t.commit;e("delete_jwt_token"),Fe.push({name:"Index"})},SOCKETIO_send_all_cards_data_to_frontend_from_tasks:function(t,e){var a=t.commit;console.log("got message from send_all_cards_data_to_frontend_from_tasks: ",e),a("unshift_to_logs",{mc_logs:e})}}}),D=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("p",{staticClass:"text-center"},[t._v("ESD Gate System")])])}],T={name:"index",data:function(){return{}},props:{},components:{}},E=T,q=(a("a474"),Object(m["a"])(E,D,O,!1,null,"12f8d60d",null)),A=q.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row search-row"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.query_string,expression:"query_string",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text","aria-label":"Search string","aria-describedby":"basic-addon2",placeholder:"Search for Gate Category/Gate Name"},domProps:{value:t.query_string},on:{input:function(e){e.target.composing||(t.query_string=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-success btn-outline-quatek",attrs:{type:"button"},on:{click:function(e){return t.search()}}},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v("Search\n        ")],1)])])]),a("div",{staticClass:"row btn-row"},[a("p",{staticClass:"w-100 text-right"},[a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Upload"},on:{click:function(e){return t.upload_show()}}},[a("font-awesome-icon",{attrs:{icon:"upload"}})],1),a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Export"},on:{click:function(e){return t.download_csv()}}},[a("font-awesome-icon",{attrs:{icon:"download"}})],1)])]),t.gates.length?a("hr"):t._e(),t.gates.length?t._e():a("div",{staticClass:"row"},[a("p",{staticClass:"w-100 text-center no-result"},[t._v("No results found")])]),t.gates.length?a("div",{staticClass:"row"},t._l(t.gates,function(t){return a("AppGate",{key:t._id.$oid,attrs:{gate:t}})}),1):t._e(),t.gates.length?a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:t.currentPage<=1}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.prevPage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),a("span",{staticClass:"sr-only"},[t._v("Previous page")])])]),a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("page"+t._s(t.currentPage))])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.nextPage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),a("span",{staticClass:"sr-only"},[t._v("next page")])])])])]):t._e(),a("b-modal",{attrs:{lazy:!0,title:"Upload Gates","ok-only":"","ok-title":"Upload","ok-variant":"success"},on:{ok:function(e){return t.upload2()}},model:{value:t.show_modal,callback:function(e){t.show_modal=e},expression:"show_modal"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("a",{staticClass:"template_download",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.download_gates_upload_template2()}}},[t._v("Upload Template(Gate).xlsx")])]),a("br"),a("b-row",[a("input",{ref:"excel_file",attrs:{id:"excel_file",type:"file",name:"excel_file"}})])],1)],1),a("b-modal",{attrs:{lazy:!0,title:"Upload gates","ok-only":"","ok-title":"Detail","ok-variant":"success"},on:{ok:function(e){return t.routeToFailedUploadPage()}},model:{value:t.show_modal2,callback:function(e){t.show_modal2=e},expression:"show_modal2"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",[t._v(t._s(this.last_upload_result.result)+" Gate upload succeeded")]),a("br"),a("b-row",[t._v(t._s(this.last_upload_result.failed_numbers)+" Gate upload failed")])],1)],1)],1)},M=[],U=a("19de"),H=a.n(U),F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-3 text-center gate-box"},[s("p",{staticClass:"text-right gate-indicator-row"},[t.gate.is_online?s("span",{staticClass:"badge gate-badge",staticStyle:{color:"#059c66"}},[s("font-awesome-icon",{attrs:{icon:"circle"}})],1):s("span",{staticClass:"badge gate-badge",staticStyle:{color:"#FF0000"}},[s("font-awesome-icon",{attrs:{icon:"circle"}})],1)]),s("img",{staticClass:"img-fluid gate-img",attrs:{src:a("06cf"),alt:"Gate image"}}),s("div",{staticClass:"w-100"}),s("p",{staticClass:"gate_name w-100"},[t._v(t._s(t.gate.category)+": "+t._s(t.gate.name))]),s("div",{staticClass:"btn-group btn-group-sm text-center",attrs:{role:"group","aria-label":"On OFF Buttons"}},[s("button",{staticClass:"btn gate-btn-on-off",class:{"btn-dark":t.isOn},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleIsOn()}}},[t._v("ON")]),s("button",{staticClass:"btn gate-btn-on-off",class:{"btn-dark":!t.isOn},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleIsOn()}}},[t._v("OFF")])]),s("div",{staticClass:"w-100"},[s("table",{staticClass:"gate-table"},[s("tr",[s("td",{staticClass:"text-center align-middle gate-icon",attrs:{rowspan:"2"}},[s("font-awesome-icon",{attrs:{icon:"shoe-prints",transform:{rotate:270},size:"1x"}})],1),s("td",{staticClass:"gate-max-min-left-td text-small"},[t._v("max")]),s("td",{staticClass:"gate-value-left-td text-small"},[t._v(t._s(t.gate.hand_max)+"KΩ")]),s("td"),s("td",{staticClass:"gate-value-right-td text-small"},[t._v(t._s(t.gate.foot_max)+"KΩ")]),s("td",{staticClass:"gate-max-min-right-td text-small"},[t._v("max")]),s("td",{staticClass:"text-center align-middle gate-icon",attrs:{rowspan:"2"}},[s("font-awesome-icon",{attrs:{icon:"hand-paper",size:"1x"}})],1)]),s("tr",[s("td",{staticClass:"gate-max-min-left-td text-small"},[t._v("min")]),s("td",{staticClass:"gate-value-left-td text-small"},[t._v(t._s(t.gate.hand_min)+"KΩ")]),s("td"),s("td",{staticClass:"gate-value-right-td text-small"},[t._v(t._s(t.gate.foot_min)+"KΩ")]),s("td",{staticClass:"gate-max-min-right-td text-small"},[t._v("min")])])])])])},Y=[],G={name:"Gate",data:function(){return{isOn:this.gate.is_on}},props:{gate:null},methods:{toggleIsOn:function(){this.isOn=!this.isOn}},components:{},created:function(){}},z=G,L=(a("1174"),Object(m["a"])(z,F,Y,!1,null,"0f376f28",null)),K=L.exports,R={name:"Gates",components:{AppGate:K},data:function(){return{currentPage:1,gates:[],query_string:"",show_modal:!1,show_modal2:!1,last_upload_result:{}}},created:function(){this.get_gates()},methods:{search:function(){var t=this;console.log(this.query_string),this.currentPage=1,N.a.get("/gates?q=".concat(this.query_string)).then(function(e){console.log(e),t.gates=e.data}).catch(function(t){console.log(t)})},upload_show:function(){this.show_modal=!0},upload2:function(){var t=this,e=new FormData,a=this.$refs.excel_file.files[0];e.append("excel_file",a),console.log(e),N.a.post("/upload_gates_excel",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),t.last_upload_result=e.data,t.$store.commit("setLastFailedUpload",e.data.failed),t.show_modal2=!0}).catch(function(t){console.log(t)})},routeToFailedUploadPage:function(){this.$router.push({name:"LastFailedUpload"})},download_gates_upload_template2:function(){N.a.get("/download_gates_upload_template",{responseType:"blob"}).then(function(t){console.log(t),H()(t.data,"闸机上传模版.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}).catch(function(t){console.log(t)})},prevPage:function(){var t=this,e=50*(this.currentPage-2);N.a.get("/gates?offset=".concat(e,"&q=").concat(this.query_string)).then(function(e){console.log(e),t.gates=e.data,t.currentPage--}).catch(function(t){console.log(t)})},nextPage:function(){var t=this,e=50*this.currentPage;N.a.get("/gates?offset=".concat(e,"&q=").concat(this.query_string)).then(function(e){0!==e.data.length?(console.log(e),t.gates=e.data,t.currentPage++):alert("Last page reached!!")}).catch(function(t){console.log(t)})},download_csv:function(){try{var t="gates_page_"+this.currentPage,e=[],a="id,name,number,category,mc_id,hand_max,hand_min,foot_max,foot_min,created_time,is_on,is_online\n",s=[],o=!0,n=!1,r=void 0;try{for(var i,c=this.gates[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var l=i.value;e.push([l._id.$oid,l.name,l.number,l.category,l.mc_id,l.hand_max,l.hand_min,l.foot_max,l.foot_min,this.$moment(l.created_time.$date).format(),l.is_on,l.is_online].join(","))}}catch(m){n=!0,r=m}finally{try{o||null==c.return||c.return()}finally{if(n)throw r}}s=e.join("\n");var d="data:text/csv;charset=utf-8,"+a+encodeURI(s),u=document.createElement("a");return u.id="csv-download-id",u.href=d,document.body.appendChild(u),document.getElementById(u.id).style.visibility="hidden",document.getElementById(u.id).download=t+".csv",document.body.appendChild(u),document.getElementById(u.id).click(),setTimeout(function(){document.body.removeChild(u)}),!0}catch(m){return!1}},get_gates:function(){var t=this;N.a.get("/gates").then(function(e){console.log(e),t.gates=e.data}).catch(function(t){console.log(t)})}}},J=R,B=(a("fc24"),Object(m["a"])(J,I,M,!1,null,"48b83e54",null)),W=B.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row search-row"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.query_string,expression:"query_string",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text","aria-label":"Search string","aria-describedby":"basic-addon2",placeholder:"Search for Card Number\\Card Category\\Name\\Job Number"},domProps:{value:t.query_string},on:{input:function(e){e.target.composing||(t.query_string=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.hid_number,expression:"hid_number",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text","aria-label":"Search string","aria-describedby":"basic-addon2",placeholder:"Search for HID Card Number"},domProps:{value:t.hid_number},on:{input:function(e){e.target.composing||(t.hid_number=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-success btn-outline-quatek",attrs:{type:"button"},on:{click:function(e){return t.search()}}},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v("Search\n        ")],1)])])]),a("div",{staticClass:"row btn-row"},[a("p",{staticClass:"w-100 text-right"},[a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Upload"},on:{click:function(e){return t.upload_show()}}},[a("font-awesome-icon",{attrs:{icon:"upload"}})],1),a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Download"},on:{click:function(e){return t.download_excel()}}},[a("font-awesome-icon",{attrs:{icon:"download"}})],1),a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Add card"},on:{click:function(e){return t.cardAdd()}}},[a("font-awesome-icon",{attrs:{icon:"user-plus"}})],1),a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Add card"},on:{click:function(e){return t.delete_many()}}},[t._v("\n        Delete all data in this page\n      ")])])]),t.cards.length?t._e():a("div",{staticClass:"row"},[a("p",{staticClass:"w-100 text-center no-result"},[t._v("没有搜索到结果")])]),t.cards.length?a("div",{staticClass:"row"},[a("table",{staticClass:"table table-striped table-responsive-md"},[t._m(0),a("tbody",t._l(t.computed_cards,function(e){return a("tr",{key:e._id.$oid},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.job_number))]),a("td",[t._v(t._s(e.card_number))]),a("td",[t._v(t._s(e.card_category))]),a("td",[t._v(t._s(e.department))]),a("td",[t._v(t._s(e.classes))]),a("td",[t._v(t._s(e.hid_card_number))]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:"button"},on:{click:function(a){return t.edit_card(e._id.$oid)}}},[a("font-awesome-icon",{attrs:{icon:"pencil-alt"}})],1)]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delete_cards([e._id.$oid])}}},[a("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])}),0)])]):t._e(),t.cards.length?a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:t.currentPage<=1}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.prevPage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),a("span",{staticClass:"sr-only"},[t._v("Previous page")])])]),a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("page "+t._s(t.currentPage))])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.nextPage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),a("span",{staticClass:"sr-only"},[t._v("Next page")])])])])]):t._e(),a("b-modal",{attrs:{title:"Upload cards","ok-only":"","ok-title":"上传",lazy:!0,"ok-variant":"success"},on:{ok:function(e){return t.upload2()}},model:{value:t.show_modal,callback:function(e){t.show_modal=e},expression:"show_modal"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("a",{staticClass:"template_download",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.download_cards_upload_template2()}}},[t._v("Upload Template(Card).xlsx")])]),a("br"),a("b-row",[a("input",{ref:"excel_file",attrs:{type:"file",name:"excel_file",id:"excel_file"}})])],1)],1),a("b-modal",{attrs:{title:"Upload cards","ok-only":"","ok-title":"查看详情",lazy:!0,"ok-variant":"success"},on:{ok:function(e){return t.routeToFailedUploadPage()}},model:{value:t.show_modal2,callback:function(e){t.show_modal2=e},expression:"show_modal2"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",[t._v(t._s(this.last_upload_result.result)+" 张卡片上传成功")]),a("br"),a("b-row",[t._v(t._s(this.last_upload_result.failed_numbers)+" 张失败")])],1)],1)],1)},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{attrs:{scope:"col"}},[t._v("Job Number")]),a("th",{attrs:{scope:"col"}},[t._v("Card Number")]),a("th",{attrs:{scope:"col"}},[t._v("Card Category")]),a("th",{attrs:{scope:"col"}},[t._v("Department")]),a("th",{attrs:{scope:"col"}},[t._v("Class")]),a("th",{attrs:{scope:"col"}},[t._v("HID Card Number")]),a("th",{attrs:{scope:"col"}},[t._v("Modify")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}],Z=(a("6b54"),a("2ef0")),X=a.n(Z),tt={name:"Cards",data:function(){return{currentPage:1,cards:[],query_string:"",show_modal:!1,cards_file:"",excel_file:"",show_modal2:!1,last_upload_result:{},hid_number:""}},computed:{computed_cards:function(){var t=X.a.cloneDeep(this.cards),e=!0,a=!1,s=void 0;try{for(var o,n=t[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var r=o.value;"0"===r.card_category?r.card_category="VIP":"1"===r.card_category?r.card_category="Wrist Strap":"2"===r.card_category?r.card_category="Shoes":"3"===r.card_category&&(r.card_category="Wrist Strap and Shoes"),r.classes&&(r.classes=r.classes.toString())}}catch(i){a=!0,s=i}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}return t}},methods:{delete_many:function(){for(var t=this.cards,e=new Array,a=0;a<t.length;a++)e[a]=t[a]._id.$oid;this.delete_cards(e)},cardAdd:function(){this.$router.push({name:"CardCreate"})},search:function(){var t=this;console.log(this.query_string),this.currentPage=1,N.a.get("cards?q=".concat(this.query_string,"&hid_number=").concat(this.hid_number)).then(function(e){console.log(e),t.cards=e.data}).catch(function(t){console.log(t)})},edit_card:function(t){this.$router.push({name:"CardEdit",params:{card_id:t}})},upload_show:function(){this.show_modal=!0},upload2:function(){var t=this,e=new FormData,a=this.$refs.excel_file.files[0];e.append("excel_file",a),console.log(e),N.a.post("upload_cards_excel",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),t.last_upload_result=e.data,t.$store.commit("setLastFailedUpload",e.data.failed),t.show_modal2=!0}).catch(function(t){console.log(t)})},routeToFailedUploadPage:function(){this.$router.push({name:"LastFailedUpload"})},download_cards_upload_template2:function(){N.a.get("download_cards_upload_template",{responseType:"blob"}).then(function(t){console.log(t),H()(t.data,"卡片上传模版.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}).catch(function(t){console.log(t)})},delete_cards:function(t){var e=this,a=prompt("Please enter YES to confirm deletion!");if("YES"===a){var s=JSON.stringify(t);console.log(s),N.a.delete("cards?delete_array=".concat(s)).then(function(t){console.log(t),alert("Delete successful!"),e.nowPage()}).catch(function(t){console.log(t),alert("Cannot delete!")})}else null===a?console.log("canceled"):alert("Input error")},nowPage:function(){var t=this,e=50*(this.currentPage-1);N.a.get("cards?offset=".concat(e,"&q=").concat(this.query_string)).then(function(e){console.log(e),t.cards=e.data}).catch(function(t){console.log(t)})},prevPage:function(){var t=this,e=50*(this.currentPage-2);N.a.get("cards?offset=".concat(e,"&q=").concat(this.query_string)).then(function(e){console.log(e),t.cards=e.data,t.currentPage--}).catch(function(t){console.log(t)})},nextPage:function(){var t=this,e=50*this.currentPage;N.a.get("cards?offset=".concat(e,"&q=").concat(this.query_string)).then(function(e){0!==e.data.length?(console.log(e),t.cards=e.data,t.currentPage++):alert("Last page reached!!")}).catch(function(t){console.log(t)})},download_csv:function(){try{var t="cards_page_"+this.currentPage,e=[],a="id,card_number,card_category,name,job_number,department,gender,note,belong_to_mc,number_in_mc,created_time\n",s=[],o=!0,n=!1,r=void 0;try{for(var i,c=this.computed_cards[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var l=i.value;e.push([l._id.$oid,l.card_number,l.card_category,l.name,l.job_number,l.department,l.gender,l.note,l.belong_to_mc,l.number_in_mc,this.$moment(l.created_time.$date).format()].join(","))}}catch(m){n=!0,r=m}finally{try{o||null==c.return||c.return()}finally{if(n)throw r}}s=e.join("\n");var d="data:text/csv;charset=utf-8,"+a+encodeURI(s),u=document.createElement("a");return u.id="csv-download-id",u.href=d,document.body.appendChild(u),document.getElementById(u.id).style.visibility="hidden",document.getElementById(u.id).download=t+".csv",document.body.appendChild(u),document.getElementById(u.id).click(),setTimeout(function(){document.body.removeChild(u)}),!0}catch(m){return!1}},download_excel:function(){N.a.get("download-cards",{responseType:"blob"}).then(function(t){console.log(t),H()(t.data,"卡片.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}).catch(function(t){console.log(t)})},get_cards:function(){var t=this;N.a.get("cards").then(function(e){console.log(e),t.cards=e.data}).catch(function(t){console.log(t)})}},created:function(){this.get_cards()}},et=tt,at=(a("c822"),Object(m["a"])(et,V,Q,!1,null,"2b3910aa",null)),st=at.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("form",{staticClass:"card-create-form"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"cardNumber"}},[t._v("Card Number *")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.card_number,expression:"card.card_number"}],staticClass:"form-control",attrs:{type:"text",id:"cardNumber"},domProps:{value:t.card.card_number},on:{input:function(e){e.target.composing||t.$set(t.card,"card_number",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"hid_number"}},[t._v("HID Card Number *")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.hid_number,expression:"card.hid_number"}],staticClass:"form-control",attrs:{type:"text",id:"hid_number"},domProps:{value:t.card.hid_number},on:{input:function(e){e.target.composing||t.$set(t.card,"hid_number",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"card_category"}},[t._v("Card Category *")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.card.card_category,expression:"card.card_category"}],staticClass:"form-control",attrs:{id:"card_category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.card,"card_category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("VIP")]),a("option",{attrs:{value:"1"}},[t._v("只测手")]),a("option",{attrs:{value:"2"}},[t._v("只测脚")]),a("option",{attrs:{value:"3"}},[t._v("手脚都测")])])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"name"}},[t._v("Name *")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.name,expression:"card.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.card.name},on:{input:function(e){e.target.composing||t.$set(t.card,"name",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"job_number"}},[t._v("Job Number *")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.job_number,expression:"card.job_number"}],staticClass:"form-control",attrs:{type:"text",id:"job_number"},domProps:{value:t.card.job_number},on:{input:function(e){e.target.composing||t.$set(t.card,"job_number",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"department"}},[t._v("Department *")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.department,expression:"card.department"}],staticClass:"form-control",attrs:{type:"text",id:"department"},domProps:{value:t.card.department},on:{input:function(e){e.target.composing||t.$set(t.card,"department",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"gender"}},[t._v("Gender *")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.card.gender,expression:"card.gender"}],staticClass:"form-control",attrs:{id:"gender"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.card,"gender",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("Woman")]),a("option",{attrs:{value:"1"}},[t._v("Man")])])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"classes"}},[t._v("Class")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.classes,expression:"card.classes"}],staticClass:"form-control",attrs:{type:"text",id:"classes"},domProps:{value:t.card.classes},on:{input:function(e){e.target.composing||t.$set(t.card,"classes",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"note"}},[t._v("Note")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.note,expression:"card.note"}],staticClass:"form-control",attrs:{type:"text",id:"note"},domProps:{value:t.card.note},on:{input:function(e){e.target.composing||t.$set(t.card,"note",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"belong_to_mc"}},[t._v("Gate Permission")]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.belong_to_mc,expression:"card.belong_to_mc"}],staticClass:"form-control",attrs:{type:"text",id:"belong_to_mc",readonly:""},domProps:{value:t.card.belong_to_mc},on:{focus:function(e){t.show_modal=!0},input:function(e){e.target.composing||t.$set(t.card,"belong_to_mc",e.target.value)}}}),a("small",{staticClass:"form-text text-muted"},[t._v('format: "gate_1:0|gate_2:1|gate_3:3"; 0：Allow access,1: No entry/exit allowed,2: No exit/entry allowed,3: Banned in and out. ')])])]),a("div",{staticClass:"form-group row text-center"},[a("div",{staticClass:"col-sm-12"},[a("button",{staticClass:"btn btn-success btn-block submit-btn",attrs:{type:"submit",disabled:t.submit_is_disabled},on:{click:function(e){return e.preventDefault(),t.submit()}}},[t._v("OK")])])])]),a("b-modal",{attrs:{title:"Gate permission","ok-only":"","ok-title":"OK",lazy:!0,"ok-variant":"success"},on:{ok:function(e){return t.confirm()}},model:{value:t.show_modal,callback:function(e){t.show_modal=e},expression:"show_modal"}},[a("b-container",{staticClass:"form-inline",attrs:{fluid:""}},t._l(t.computed_rights,function(e,s){return a("b-row",{key:e.gate_name,staticClass:"w-100"},[a("label",{staticClass:"col-6",attrs:{for:"gate_"+s}},[t._v(t._s(s+1)+" - Gate name: "+t._s(e.gate_name))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.rights,expression:"gate.rights"}],staticClass:"form-control col-6",attrs:{id:"gate_"+s},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"rights",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:"0"}},[t._v("Allow access")]),a("option",{attrs:{value:"1"}},[t._v("No entry/exit allowed")]),a("option",{attrs:{value:"2"}},[t._v("No exit/entry allowed")]),a("option",{attrs:{value:"3"}},[t._v("Banned in and out")])]),a("hr",{staticClass:"w-100"})])}),1)],1)],1)},nt=[],rt=(a("28a5"),{name:"",data:function(){return{card:{id:"",card_number:"",card_category:"",name:"",job_number:"",department:"",gender:"",note:"",belong_to_mc:"",classes:"",hid_number:""},submit_is_disabled:!1,show_modal:!1,gates:[]}},computed:{computed_rights:function(){var t=[];if(this.card.id){var e=!0,a=!1,s=void 0;try{for(var o,n=this.card.belong_to_mc.split("|")[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var r=o.value;r||t.push({gate_name:r.split(":")[0],rights:r.split(":")[1]})}}catch(_){a=!0,s=_}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}}var i=!0,c=!1,l=void 0;try{for(var d,u=function(){var e=d.value;0===t.filter(function(t){return t.gate_name===e.name}).length&&t.push({gate_name:e.name,rights:"0"})},m=this.gates[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)u()}catch(_){c=!0,l=_}finally{try{i||null==m.return||m.return()}finally{if(c)throw l}}return t}},methods:{submit:function(){var t=this;this.submit_is_disabled=!0,console.log(this.card),this.card.card_category&&this.card.name&&this.card.job_number&&this.card.department&&this.card.gender?("undefined"===this.card.hid_number&&(this.card.hid_number=""),this.card.id?N.a.patch("/cards/create",this.card).then(function(e){console.log(e),alert("Save successfully!"),t.$router.push({name:"Cards"})}).catch(function(e){console.log(e),alert("Save failed!"),t.submit_is_disabled=!1}):N.a.post("/cards/create",this.card).then(function(e){console.log(e),alert("Save successfully!"),t.$router.push({name:"Cards"})}).catch(function(e){console.log(e),alert("Save failed!"),t.submit_is_disabled=!1})):(alert("Information with * cannot be empty!"),this.submit_is_disabled=!1)},confirm:function(){var t=[],e=!0,a=!1,s=void 0;try{for(var o,n=this.computed_rights[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var r=o.value;t.push(r.gate_name+":"+r.rights)}}catch(i){a=!0,s=i}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}console.log(t),this.card.belong_to_mc=t.join("|")}},created:function(){var t=this;this.$route.params.card_id&&(this.card.id=this.$route.params.card_id,N.a.get("/get-card-by-id?q=".concat(this.card.id)).then(function(e){console.log("card: ",e.data),t.card.card_number=e.data[0].card_number,t.card.card_category=e.data[0].card_category,t.card.name=e.data[0].name,t.card.job_number=e.data[0].job_number,t.card.department=e.data[0].department,t.card.gender=e.data[0].gender,t.card.note=e.data[0].note,t.card.belong_to_mc=e.data[0].belong_to_mc,t.card.number_in_mc=e.data[0].number_in_mc,t.card.classes=String(e.data[0].classes),t.card.hid_number=String(e.data[0].hid_card_number),console.log(t.card)}).catch(function(t){console.log(t)})),N.a.get("/gates?offset=0&limit=10000").then(function(e){console.log(e),t.gates=e.data,t.currentPage=1}).catch(function(t){console.log(t)})}}),it=rt,ct=(a("2115"),Object(m["a"])(it,ot,nt,!1,null,"1b3686be",null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"form-row search-row"},[a("div",{staticClass:"input-group"},[a("datetime",{attrs:{type:"datetime","input-class":"form-control",format:"yyyy-MM-dd HH:mm",phrases:{ok:"OK",cancel:"Cancel"},"minute-step":10},model:{value:t.datetime_from,callback:function(e){t.datetime_from=e},expression:"datetime_from"}}),a("label",{staticClass:"col-sm-1 text-center search-space"},[t._v("to")]),a("datetime",{attrs:{type:"datetime","input-class":"form-control",format:"yyyy-MM-dd HH:mm",phrases:{ok:"OK",cancel:"Cancel"},"minute-step":10},model:{value:t.datetime_to,callback:function(e){t.datetime_to=e},expression:"datetime_to"}})],1),t._m(0),a("div",{staticClass:"form-inline"},[a("label",{staticClass:"sr-only",attrs:{for:"card_number"}},[t._v("Query")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.card_number,expression:"card_number",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"card_number",type:"text",placeholder:"Card Number"},domProps:{value:t.card_number},on:{input:function(e){e.target.composing||(t.card_number=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("label",{staticClass:"sr-only",attrs:{for:"job_number"}},[t._v("Job Number")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.job_number,expression:"job_number",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"job_number",type:"text",placeholder:"Job Number"},domProps:{value:t.job_number},on:{input:function(e){e.target.composing||(t.job_number=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("label",{staticClass:"sr-only",attrs:{for:"department"}},[t._v("Department")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.department,expression:"department",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"department",type:"text",placeholder:"Department"},domProps:{value:t.department},on:{input:function(e){e.target.composing||(t.department=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("label",{staticClass:"sr-only",attrs:{for:"hid_number"}},[t._v("HID Card Number")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.hid_number,expression:"hid_number",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"hid_number",type:"text",placeholder:"HID Card Number"},domProps:{value:t.hid_number},on:{input:function(e){e.target.composing||(t.hid_number=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._m(1),a("div",{staticClass:"form-inline"},[a("label",{staticClass:"sr-only",attrs:{for:"department"}},[t._v("Name")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"name",type:"text",placeholder:"Name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("label",{staticClass:"sr-only",attrs:{for:"department"}},[t._v("Gate ID")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.mc_id,expression:"mc_id",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"mc_id",type:"text",placeholder:"Gate ID"},domProps:{value:t.mc_id},on:{input:function(e){e.target.composing||(t.mc_id=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("label",{staticClass:"sr-only",attrs:{for:"department"}},[t._v("Card Category")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.card_cat,expression:"card_cat",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"card_cat",placeholder:"Card Category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.card_cat=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),a("option",{attrs:{value:"0"}},[t._v("VIP")]),a("option",{attrs:{value:"1"}},[t._v("Wrist strap")]),a("option",{attrs:{value:"2"}},[t._v("Shoes")]),a("option",{attrs:{value:"3"}},[t._v("Wrist strap and Shoes")])])])]),a("button",{staticClass:"btn btn-success mb-2 btn_quatek",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.search()}}},[t._v("Search")])]),a("div",{staticClass:"row btn-row"},[a("p",{staticClass:"w-100 text-right"},[a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Download all data"},on:{click:function(e){return t.download_excel()}}},[a("font-awesome-icon",{attrs:{icon:"download"}})],1),a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"Download matched data"},on:{click:function(e){return t.download_excel2()}}},[a("font-awesome-icon",{attrs:{icon:"download"}})],1)])]),t.cardtests.length?t._e():a("div",{staticClass:"row"},[a("p",{staticClass:"w-100 text-center no-result"},[t._v("No results found")])]),t.cardtests.length?a("div",{staticClass:"row"},[a("table",{staticClass:"table table-striped table-responsive-md"},[t._m(2),a("tbody",t._l(t.computed_cardtests,function(e){return a("tr",{key:e._id.$oid},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.job_number))]),a("td",[t._v(t._s(e.card_number))]),a("td",[t._v(t._s(e.hid_number))]),a("td",[t._v(t._s(e.department))]),a("td",[t._v(t._s(e.card_category))]),a("td",[t._v(t._s(e.in_out_symbol))]),a("td",[t._v(t._s(e.mc_id))]),a("td",[t._v(t._s(t._f("moment")(e.test_datetime.$date,"YYYY-MM-DD HH:mm:ss")))]),a("td",[t._v(t._s(e.test_result))]),a("td",[t._v(t._s(e.is_tested))]),a("td",[t._v(t._s(e.hand))]),a("td",[t._v(t._s(e.left_foot))]),a("td",[t._v(t._s(e.right_foot))])])}),0)])]):t._e(),this.cardtests.length>0?a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:t.currentPage<=1}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.prevPage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),a("span",{staticClass:"sr-only"},[t._v("previous page")])])]),a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("page"+t._s(t.currentPage))])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.nextPage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),a("span",{staticClass:"sr-only"},[t._v("next page")])])]),a("li",{staticClass:"page-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.go_to_page_number,expression:"go_to_page_number"}],staticClass:"page-link form-control go-to-page-number text-center",attrs:{type:"text"},domProps:{value:t.go_to_page_number},on:{input:function(e){e.target.composing||(t.go_to_page_number=e.target.value)}}})]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.go_to_page()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("Go")]),a("span",{staticClass:"sr-only"},[t._v("Go")])])])])]):t._e()])},ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{attrs:{scope:"col"}},[t._v("Job Number")]),a("th",{attrs:{scope:"col"}},[t._v("Card Number")]),a("th",{attrs:{scope:"col"}},[t._v("HID Card Number")]),a("th",{attrs:{scope:"col"}},[t._v("Department")]),a("th",{attrs:{scope:"col"}},[t._v("Card Category")]),a("th",{attrs:{scope:"col"}},[t._v("In/Out")]),a("th",{attrs:{scope:"col"}},[t._v("Gate ID")]),a("th",{attrs:{scope:"col"}},[t._v("Time")]),a("th",{attrs:{scope:"col"}},[t._v("Pass or NO")]),a("th",{attrs:{scope:"col"}},[t._v("Test or No")]),a("th",{attrs:{scope:"col"}},[t._v("Wrist Strap Dat(KΩ)")]),a("th",{attrs:{scope:"col"}},[t._v("Left Shoe Data(KΩ)")]),a("th",{attrs:{scope:"col"}},[t._v("Right Shoe Data(KΩ)")])])])}],mt={name:"",data:function(){return{currentPage:1,cardtests:[],datetime_from:this.$moment().subtract(24,"hours").second(0).millisecond(0).format("YYYY-MM-DDTHH:mm"),datetime_to:this.$moment().add(12,"hours").second(0).millisecond(0).format("YYYY-MM-DDTHH:mm"),cards:[],job_number:"",go_to_page_number:"",card_number:"",department:"",name:"",mc_id:"",card_cat:"",hid_number:""}},computed:{query_string:function(){return"datetime_from=".concat(this.datetime_from,"&datetime_to=").concat(this.datetime_to,"&job_number=").concat(this.job_number,"&card_number=").concat(this.card_number,"&department=").concat(this.department,"&name=").concat(this.name,"&mc_id=").concat(this.mc_id,"&card_cat=").concat(this.card_cat,"&hid_number=").concat(this.hid_number)},computed_cardtests:function(){var t=this,e=X.a.cloneDeep(this.cardtests),a=!0,s=!1,o=void 0;try{for(var n,r=function(){var e=n.value,a=t.cards.filter(function(t){return t.card_number===e.card_number});if(a.length>0)e.name=a[0].name,e.job_number=a[0].job_number,e.department=a[0].department;else{var s=t.cards.filter(function(t){return String(t.card_counter)===String(e.card_counter)});s.length>0?(e.name=s[0].name,e.job_number=s[0].job_number,e.department=s[0].department):(e.name="Name not found",e.job_number="Job Number not found",e.department="Department not found")}"0"===e.test_result?e.test_result="NO":e.test_result="OK","0"===e.is_tested?e.is_tested="NO":e.is_tested="OK","0"===e.card_category?e.card_category="VIP":"1"===e.card_category?e.card_category="Wrist Strap":"2"===e.card_category?e.card_category="Shoes":"3"===e.card_category&&(e.card_category="Wrist Strap and Shoes"),"0"===e.in_out_symbol?e.in_out_symbol="Out":"1"===e.in_out_symbol&&(e.in_out_symbol="In")},i=e[Symbol.iterator]();!(a=(n=i.next()).done);a=!0)r()}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}return console.log(e),e}},methods:{search:function(){var t=this;this.currentPage=1,N.a.get("/cardtests?".concat(this.query_string)).then(function(e){t.cardtests=e.data}).catch(function(t){console.log(t)})},download_excel:function(){N.a.get("/cardtests?".concat(this.query_string,"&is_downloading_excel=true"),{responseType:"blob"}).then(function(t){console.log(t),H()(t.data,"静电测试数据.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}).catch(function(t){console.log(t)})},download_excel2:function(){N.a.get("/cardtests?".concat(this.query_string,"&is_downloading_excel_2=true"),{responseType:"blob"}).then(function(t){console.log(t),H()(t.data,"静电测试数据2.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}).catch(function(t){console.log(t)})},prevPage:function(){var t=this,e=50*(this.currentPage-2);N.a.get("/cardtests?offset=".concat(e,"&").concat(this.query_string)).then(function(e){console.log(e.data),t.cardtests=e.data,t.currentPage--}).catch(function(t){console.log(t)})},nextPage:function(){var t=this,e=50*this.currentPage;N.a.get("/cardtests?offset=".concat(e,"&").concat(this.query_string)).then(function(e){0!==e.data.length?(console.log(e.data),t.cardtests=e.data,t.currentPage++):alert("Last page reached!")}).catch(function(t){console.log(t)})},go_to_page:function(){var t=this;this.currentPage=+this.go_to_page_number;var e=this.currentPage-50;N.a.get("/cardtests?offset=".concat(e,"&").concat(this.query_string)).then(function(e){0!==e.data.length?(console.log(e.data),t.cardtests=e.data):alert("page not present!")}).catch(function(t){console.log(t)})}},created:function(){var t=this;N.a.get("/cards?offset=0&limit=50000").then(function(e){console.log("get cards: ",e.data),t.cards=e.data}).catch(function(t){console.log(t)})}},_t=mt,pt=(a("86f8"),Object(m["a"])(_t,dt,ut,!1,null,"d76e2172",null)),ft=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"form-row search-row"},[a("div",{staticClass:"input-group"},[a("datetime",{attrs:{type:"datetime","input-class":"form-control",format:"yyyy-MM-dd HH:mm",phrases:{ok:"OK",cancel:"CANCEL"},"minute-step":10},model:{value:t.date3,callback:function(e){t.date3=e},expression:"date3"}}),a("label",{staticClass:"col-sm-1 text-center search-space"},[t._v("至")]),a("datetime",{attrs:{type:"datetime","input-class":"form-control",format:"yyyy-MM-dd HH:mm",phrases:{ok:"OK",cancel:"CANCEL"},"minute-step":10},model:{value:t.date3,callback:function(e){t.date3=e},expression:"date3"}}),a("label",{staticClass:"col-sm-4 text-center search-space"}),t._m(0)],1),t._m(1),a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control",attrs:{type:"text","aria-label":"Search string","aria-describedby":"basic-addon2"}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-success btn-outline-quatek",attrs:{type:"button"}},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v("Search\n        ")],1)])])]),a("div",{staticClass:"row btn-row"},[a("p",{staticClass:"w-100 text-right"},[a("button",{staticClass:"btn btn-secondary btn-row-btn btn-sm",attrs:{type:"button",title:"email Send test"}},[a("font-awesome-icon",{attrs:{icon:"envelope"}})],1)])]),a("div",{staticClass:"row"},[a("table",{staticClass:"table table-striped table-responsive-md"},[t._m(2),a("tbody",t._l(25,function(e){return a("tr",{key:e},[a("td",[t._v("Name")]),a("td",[t._v("12938475")]),a("td",[t._v("384758692747387")]),a("td",[t._v("Card type 1")]),a("td",[t._v("Department 1")]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:"button"}},[a("font-awesome-icon",{attrs:{icon:"pencil-alt"}})],1)]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:"button"}},[a("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])}),0)])]),a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"}},[a("span",{attrs:{"aria-hidden":"true"}},[a("font-awesome-icon",{attrs:{icon:"caret-square-left"}})],1),a("span",{staticClass:"sr-only"},[t._v("Previous page")])])]),a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("this "+t._s(t.currentPage)+" page")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[a("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1),a("span",{staticClass:"sr-only"},[t._v("next page")])])])])])])},gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control col-sm-3"},[a("option",{attrs:{value:""}},[t._v("All States")]),a("option",{attrs:{value:""}},[t._v("States1")]),a("option",{attrs:{value:""}},[t._v("States2")]),a("option",{attrs:{value:""}},[t._v("States3")]),a("option",{attrs:{value:""}},[t._v("States4")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{attrs:{scope:"col"}},[t._v("Job number")]),a("th",{attrs:{scope:"col"}},[t._v("Card number")]),a("th",{attrs:{scope:"col"}},[t._v("Card type")]),a("th",{attrs:{scope:"col"}},[t._v("Department")]),a("th",{attrs:{scope:"col"}},[t._v("Modify")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}],bt={name:"Attendances",data:function(){return{currentPage:1,date1:this.$moment().format("YYYY-MM-DDTHH:mm:ss"),date2:this.$moment().format("YYYY-MM-DDTHH:mm:ss"),date3:this.$moment().format("YYYY-MM-DDTHH:mm:ss")}},props:{},components:{}},ht=bt,yt=(a("b902"),Object(m["a"])(ht,vt,gt,!1,null,"445d701b",null)),Ct=yt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("b-nav",{staticClass:"col-md-2 offset-md-1 sidebar",attrs:{vertical:""}},[a("b-nav-item",{key:"system-config",attrs:{to:{name:"system-config"}}},[t._v("Email and SMTP")]),a("b-nav-item",{key:"other-database",attrs:{to:{name:"other-database"}}},[t._v("Database Connection")]),a("b-nav-item",{key:"interval-task",attrs:{to:{name:"interval-task"}}},[t._v("Task Design(According to the interval)")]),a("b-nav-item",{key:"crontab-task",attrs:{to:{name:"crontab-task"}}},[t._v("Task Design(According to the time)")]),a("b-nav-item",{key:"background-task",attrs:{to:{name:"background-task"}}},[t._v("Administrator Tools")]),a("b-nav-item",{key:"class-time-config",attrs:{to:{name:"class-time-config"}}},[t._v("Class Setting")]),a("b-nav-item",{key:"card_number_convertor_config",attrs:{to:{name:"card_number_convertor_config"}}},[t._v("Card Number Conversion Tool")]),a("b-nav-item",{key:"update-cards-from-other-database",attrs:{to:{name:"update-cards-from-other-database"}}},[t._v("Card Number Synchronization")]),a("br")],1),a("div",{staticClass:"col-md-9"},[a("router-view")],1)],1)])},wt=[],xt={methods:{}},Pt=xt,$t=(a("77ac"),Object(m["a"])(Pt,kt,wt,!1,null,"07cea8a8",null)),Nt=$t.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{staticClass:"form-inline"},[a("label",{staticClass:"sr-only",attrs:{for:"task"}},[t._v("Task")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.interval_task.task,expression:"interval_task.task"}],staticClass:"custom-select mb-2 mr-sm-2",attrs:{name:"task",id:"task"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.interval_task,"task",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("------Task selection------")]),a("option",{attrs:{value:"app.mod_task.tasks.send_email_of_logs:"}},[t._v("Task: Send all reports")]),a("option",{attrs:{value:"app.mod_task.tasks.get_logs_from_mc_task"}},[t._v("Task:Get logs from gates")]),a("option",{attrs:{value:"app.mod_task.tasks.save_to_other_database"}},[t._v("Task: Save to another")]),a("option",{attrs:{value:"app.mod_task.tasks.update_cards_from_other_database"}},[t._v("Task: Card number synchronization")])]),a("label",{staticClass:"sr-only",attrs:{for:"every"}},[t._v("Run every "+t._s(t.interval_task.every)+" seconds")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.interval_task.every,expression:"interval_task.every"}],staticClass:"form-control",attrs:{type:"text",id:"every",placeholder:"Run every _ seconds"},domProps:{value:t.interval_task.every},on:{input:function(e){e.target.composing||t.$set(t.interval_task,"every",e.target.value)}}}),t._m(1)]),a("button",{staticClass:"btn btn-success mb-2 btn_quatek",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit()}}},[t._v("\n      Add\n    ")])]),a("br"),a("div",[a("div",{staticClass:"row"},[a("table",{staticClass:"table table-striped table-responsive-md"},[t._m(2),t.tasks.length?t._e():a("tbody",[t._m(3)]),t.tasks.length?a("tbody",t._l(t.computed_tasks,function(e){return a("tr",{key:e._id.$oid},[a("td",[t._v(t._s(e.task))]),a("td",[t._v(t._s(e.interval.every))]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delete_task(e._id.$oid)}}},[a("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])}),0):t._e()])])])])},St=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text"},[t._v("Every ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"input-group-text"},[t._v("Run every _ seconds")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Task")]),a("th",{attrs:{scope:"col"}},[t._v("Running interval")]),a("th",{attrs:{scope:"col"}},[t._v("DELETE")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v("Task not found")])])}],Dt={data:function(){return{tasks:[],interval_task:{task:"",every:"60"}}},computed:{computed_tasks:function(){var t=X.a.cloneDeep(this.tasks),e=!0,a=!1,s=void 0;try{for(var o,n=t[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var r=o.value;r.task.indexOf("get_logs_from_mc_task")>=0?r.task="Get logs from gates":r.task.indexOf("send_email_of_logs")>=0?r.task="Send Report":r.task.indexOf("save_to_other_database")>=0&&(r.task="save to other database")}}catch(i){a=!0,s=i}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}return t}},methods:{submit:function(){var t=this;0!=this.interval_task.task.length&&(N.a.get("/does-task-exist?q=".concat(this.interval_task.task)).then(function(e){console.log(e.data),!1===e.data.does_task_exist?N.a.post("/task-interval-add-one",{every:t.interval_task.every,task:t.interval_task.task}).then(function(e){console.log(e.data),t.get_tasks()}).catch(function(t){console.log(t)}):alert("The current task already exists. Please do not add it again!")}).catch(function(t){console.log(t)}),console.log(this.interval_task))},delete_task:function(t){var e=this;N.a.post("/task-delete",{task_id:t}).then(function(t){console.log(t.data),e.get_tasks()}).catch(function(t){console.log(t)})},get_tasks:function(){var t=this;N.a.get("/task-interval").then(function(e){console.log(e),t.tasks=e.data}).catch(function(t){console.log(t)})}},created:function(){this.get_tasks()}},Ot=Dt,Tt=(a("7004"),Object(m["a"])(Ot,jt,St,!1,null,"649117dc",null)),Et=Tt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{staticClass:"form-inline"},[a("label",{staticClass:"sr-only",attrs:{for:"task"}},[t._v("Task")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.crontab_task.task,expression:"crontab_task.task"}],staticClass:"custom-select mb-2 mr-sm-2",attrs:{name:"task",id:"task"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.crontab_task,"task",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("------Task selection------")]),a("option",{attrs:{value:"app.mod_task.tasks.send_email_of_logs:"}},[t._v("Task: Send all eports")]),a("option",{attrs:{value:"app.mod_task.tasks.get_logs_from_mc_task"}},[t._v("Task:Get logs from gates")]),a("option",{attrs:{value:"app.mod_task.tasks.save_to_other_database"}},[t._v("Task: Save to another ")]),t._l(t.card_classes,function(e){return a("option",{key:e.name,domProps:{value:"app.mod_task.tasks.send_email_of_logs:"+e.name}},[t._v("task: send"+t._s(e.name)+"class report ")])})],2),a("label",{staticClass:"sr-only",attrs:{for:"minute"}},[t._v("Minute")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.crontab_task.minute,expression:"crontab_task.minute"}],staticClass:"form-control",attrs:{type:"text",id:"minute",placeholder:"0 - 59"},domProps:{value:t.crontab_task.minute},on:{input:function(e){e.target.composing||t.$set(t.crontab_task,"minute",e.target.value)}}}),t._m(0)]),a("label",{staticClass:"sr-only",attrs:{for:"hour"}},[t._v("Hour")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.crontab_task.hour,expression:"crontab_task.hour"}],staticClass:"form-control",attrs:{type:"text",id:"hour",placeholder:"0 - 23"},domProps:{value:t.crontab_task.hour},on:{input:function(e){e.target.composing||t.$set(t.crontab_task,"hour",e.target.value)}}}),t._m(1)]),a("label",{staticClass:"sr-only",attrs:{for:"day_of_month"}},[t._v("Day")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.crontab_task.day_of_month,expression:"crontab_task.day_of_month"}],staticClass:"form-control",attrs:{type:"text",id:"day_of_month",placeholder:"1 - 31"},domProps:{value:t.crontab_task.day_of_month},on:{input:function(e){e.target.composing||t.$set(t.crontab_task,"day_of_month",e.target.value)}}}),t._m(2)]),a("label",{staticClass:"sr-only",attrs:{for:"month_of_year"}},[t._v("Week")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.crontab_task.month_of_year,expression:"crontab_task.month_of_year"}],staticClass:"custom-select mb-2 mr-sm-2",attrs:{name:"task",id:"month_of_year"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.crontab_task,"month_of_year",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"*"}},[t._v("All Mounth")]),a("option",{attrs:{value:"1"}},[t._v("January ")]),a("option",{attrs:{value:"2"}},[t._v("February ")]),a("option",{attrs:{value:"3"}},[t._v("March ")]),a("option",{attrs:{value:"4"}},[t._v("April ")]),a("option",{attrs:{value:"5"}},[t._v("May ")]),a("option",{attrs:{value:"6"}},[t._v("June ")]),a("option",{attrs:{value:"7"}},[t._v("July ")]),a("option",{attrs:{value:"8"}},[t._v("August ")]),a("option",{attrs:{value:"9"}},[t._v("September ")]),a("option",{attrs:{value:"10"}},[t._v("October ")]),a("option",{attrs:{value:"11"}},[t._v("November ")]),a("option",{attrs:{value:"12"}},[t._v("December")])]),a("label",{staticClass:"sr-only",attrs:{for:"day_of_week"}},[t._v("月")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.crontab_task.day_of_week,expression:"crontab_task.day_of_week"}],staticClass:"custom-select mb-2 mr-sm-2",attrs:{name:"task",id:"day_of_week"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.crontab_task,"day_of_week",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"*"}},[t._v("All Day")]),a("option",{attrs:{value:"0"}},[t._v("Sunday")]),a("option",{attrs:{value:"1"}},[t._v("Monday")]),a("option",{attrs:{value:"2"}},[t._v("Tuesday")]),a("option",{attrs:{value:"3"}},[t._v("Wednesday")]),a("option",{attrs:{value:"4"}},[t._v("Thursday")]),a("option",{attrs:{value:"5"}},[t._v("Friday")]),a("option",{attrs:{value:"6"}},[t._v("Saturday")])]),a("button",{staticClass:"btn btn-success mb-2 btn_quatek",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit()}}},[t._v("Add")])]),t._m(3),a("br"),a("div",[a("div",{staticClass:"row"},[a("table",{staticClass:"table table-striped table-responsive-md"},[t._m(4),t.tasks.length?t._e():a("tbody",[t._m(5)]),t.tasks.length?a("tbody",t._l(t.computed_tasks,function(e){return a("tr",{key:e._id.$oid},[a("td",[t._v("\n              "+t._s(e.task)+"\n              "),""!==e.args[0]?a("span",[t._v(": "+t._s(e.args[0])+" Class")]):t._e()]),a("td",[t._v(t._s(e.crontab.minute)+" | "+t._s(e.crontab.hour)+" | "+t._s(e.crontab.day_of_month)+" | "+t._s(e.crontab.month_of_year)+" | "+t._s(e.crontab.day_of_week))]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:" button"},on:{click:function(a){return t.delete_task(e._id.$oid)}}},[a("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])}),0):t._e()])])])])},At=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"input-group-text"},[t._v("Minute")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"input-group-text"},[t._v("Hour")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"input-group-text"},[t._v("Day")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",{staticClass:"form-text text-muted",attrs:{id:"passwordHelpBlock"}},[t._v("\n    Learn more:\n    "),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Cron",target:"_blank"}},[t._v("crontab wikipedia")]),a("span",[t._v(" ")]),t._v("\n    or:\n    "),a("a",{attrs:{href:"https://baike.baidu.com/item/crontab/8819388",target:"_blank"}},[t._v("crontab Baidu Encyclopedia")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Task")]),a("th",{attrs:{scope:"col"}},[t._v("Running Time(min\\hour\\day\\month\\week)")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v("Task not found")])])}],It=(a("c5f6"),{data:function(){return{tasks:[],crontab_task:{task:"",minute:"*",hour:"*",day_of_month:"*",month_of_year:"*",day_of_week:"*"},card_classes:[]}},computed:{computed_tasks:function(){var t=X.a.cloneDeep(this.tasks),e=!0,a=!1,s=void 0;try{for(var o,n=t[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var r=o.value;if(r.task.indexOf("get_logs_from_mc_task")>=0?r.task="Get logs from gates":r.task.indexOf("send_email_of_logs")>=0?r.task="Send all reports":r.task.indexOf("save_to_other_database")>=0&&(r.task="Save to another"),"*"!==r.crontab.hour){var i=Number(r.crontab.hour)-(new Date).getTimezoneOffset()/60;r.crontab.hour=i>=24?i-24:i}}}catch(c){a=!0,s=c}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}return t}},methods:{submit:function(){var t=this;0!=this.crontab_task.task.length&&("*"===this.crontab_task.minute||Number(this.crontab_task.minute)<=59&&Number(this.crontab_task.minute)>=0?"*"===this.crontab_task.hour||Number(this.crontab_task.hour)<=23&&Number(this.crontab_task.hour)>=0?"*"===this.crontab_task.day_of_month||Number(this.crontab_task.day_of_month)<=31&&Number(this.crontab_task.day_of_month)>=1?(N.a.get("/does-task-exist?q=".concat(this.crontab_task.task)).then(function(e){console.log(e.data),!1===e.data.does_task_exist?N.a.post("/task-crontab-add-one",{task:t.crontab_task.task,minute:t.crontab_task.minute,hour:t.computed_hour(t.crontab_task.hour),day_of_month:t.crontab_task.day_of_month,month_of_year:t.crontab_task.month_of_year,day_of_week:t.crontab_task.day_of_week}).then(function(e){console.log(e.data),t.get_tasks()}).catch(function(t){console.log(t)}):alert("The current task already exists. Please do not add it again!")}).catch(function(t){console.log(t.data)}),console.log(this.crontab_task)):alert("day Configure error!"):alert("hou Configure error!"):alert("minute Configure error!"))},delete_task:function(t){var e=this;N.a.post("/task-delete",{task_id:t}).then(function(t){console.log(t.data),e.get_tasks()}).catch(function(t){console.log(t)})},get_tasks:function(){var t=this;N.a.get("/task-crontab").then(function(e){console.log(e),t.tasks=e.data}).catch(function(t){console.log(t)})},get_class_times:function(){var t=this;N.a.get("/get-class-times").then(function(e){console.log(e),t.card_classes=e.data}).catch(function(t){console.log(t)})},computed_hour:function(t){if("*"===t)return"*";var e=Number(t)+(new Date).getTimezoneOffset()/60;return e>=0?String(e):String(e+24)}},created:function(){this.get_tasks(),this.get_class_times()}}),Mt=It,Ut=(a("3669"),Object(m["a"])(Mt,qt,At,!1,null,"36893142",null)),Ht=Ut.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"smtp_host"}},[t._v("SMTP IP or Domain Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_host,expression:"config.smtp_host"}],staticClass:"form-control",attrs:{type:"text",id:"smtp_host"},domProps:{value:t.config.smtp_host},on:{input:function(e){e.target.composing||t.$set(t.config,"smtp_host",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"smtp_port"}},[t._v("SMTP Port")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_port,expression:"config.smtp_port"}],staticClass:"form-control",attrs:{type:"text",id:"smtp_port"},domProps:{value:t.config.smtp_port},on:{input:function(e){e.target.composing||t.$set(t.config,"smtp_port",e.target.value)}}})]),a("div",{staticClass:"form-group form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_need_auth,expression:"config.smtp_need_auth"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"smtp_need_auth"},domProps:{checked:Array.isArray(t.config.smtp_need_auth)?t._i(t.config.smtp_need_auth,null)>-1:t.config.smtp_need_auth},on:{change:function(e){var a=t.config.smtp_need_auth,s=e.target,o=!!s.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);s.checked?r<0&&t.$set(t.config,"smtp_need_auth",a.concat([n])):r>-1&&t.$set(t.config,"smtp_need_auth",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.config,"smtp_need_auth",o)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"smtp_need_auth"}},[t._v("Need to verify")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"smtp_username"}},[t._v("The Usename of SMTP")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_username,expression:"config.smtp_username"}],staticClass:"form-control",attrs:{type:"text",id:"smtp_username"},domProps:{value:t.config.smtp_username},on:{input:function(e){e.target.composing||t.$set(t.config,"smtp_username",e.target.value)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.config.smtp_need_auth,expression:"config.smtp_need_auth"}],staticClass:"form-group"},[a("label",{attrs:{for:"smtp_password"}},[t._v("The Password of SMTP")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_password,expression:"config.smtp_password"}],staticClass:"form-control",attrs:{type:"text",id:"smtp_password"},domProps:{value:t.config.smtp_password},on:{input:function(e){e.target.composing||t.$set(t.config,"smtp_password",e.target.value)}}})]),a("div",{staticClass:"form-group form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_use_ssl,expression:"config.smtp_use_ssl"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"smtp_use_ssl"},domProps:{checked:Array.isArray(t.config.smtp_use_ssl)?t._i(t.config.smtp_use_ssl,null)>-1:t.config.smtp_use_ssl},on:{change:function(e){var a=t.config.smtp_use_ssl,s=e.target,o=!!s.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);s.checked?r<0&&t.$set(t.config,"smtp_use_ssl",a.concat([n])):r>-1&&t.$set(t.config,"smtp_use_ssl",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.config,"smtp_use_ssl",o)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"smtp_use_ssl"}},[t._v("Use SSL")])]),a("div",{staticClass:"form-group form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smtp_use_tls,expression:"config.smtp_use_tls"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"smtp_use_tls"},domProps:{checked:Array.isArray(t.config.smtp_use_tls)?t._i(t.config.smtp_use_tls,null)>-1:t.config.smtp_use_tls},on:{change:function(e){var a=t.config.smtp_use_tls,s=e.target,o=!!s.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);s.checked?r<0&&t.$set(t.config,"smtp_use_tls",a.concat([n])):r>-1&&t.$set(t.config,"smtp_use_tls",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.config,"smtp_use_tls",o)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"smtp_use_tls"}},[t._v("Use TLS")])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"emalis"}},[t._v("Email for Receiving Report")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.emails,expression:"config.emails"}],staticClass:"form-control",attrs:{type:"text",id:"emalis"},domProps:{value:t.config.emails},on:{input:function(e){e.target.composing||t.$set(t.config,"emails",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"emailsHelp"}},[t._v("Format: a@example.com,b@example.com")])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"work_hours"}},[t._v("Working time")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.work_hours,expression:"config.work_hours"}],staticClass:"form-control",attrs:{type:"text",id:"work_hours"},domProps:{value:t.config.work_hours},on:{input:function(e){e.target.composing||t.$set(t.config,"work_hours",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"work_hours_help"}},[t._v("Format: 8:00-18:00")])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"timezone"}},[t._v("Time Zone")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.timezone,expression:"config.timezone"}],staticClass:"form-control",attrs:{type:"text",id:"timezone"},domProps:{value:t.config.timezone},on:{input:function(e){e.target.composing||t.$set(t.config,"timezone",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"timezone_help"}},[t._v("example: +8")])]),a("button",{staticClass:"btn btn-success btn-quatek",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit()}}},[t._v("OK")])])},Yt=[],Gt={data:function(){return{config:{smtp_host:"",smtp_port:"465",smtp_use_ssl:!0,smtp_use_tls:!0,smtp_username:"",smtp_password:"",emails:"",work_hours:"8:00-18:00",smtp_need_auth:!0,timezone:""}}},methods:{submit:function(){console.log(this.config),N.a.post("/update-system-config",this.config).then(function(t){console.log(t.data),alert("Save successfully!")}).catch(function(t){console.log(t),alert("Save failed!")})},get_system_config:function(){var t=this;N.a.get("/get-system-config").then(function(e){console.log(e.data),t.config=e.data}).catch(function(t){console.log(t)})}},created:function(){this.get_system_config()}},zt=Gt,Lt=(a("e061"),Object(m["a"])(zt,Ft,Yt,!1,null,"2ff7c0ae",null)),Kt=Lt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"db_type"}},[t._v("Database type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.config.db_type,expression:"config.db_type"}],staticClass:"form-control",attrs:{name:"db_type",id:"db_type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.config,"db_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("------------")]),a("option",{attrs:{value:"oracle"}},[t._v("Oracle")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"db_name"}},[t._v("Database Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.db_name,expression:"config.db_name"}],staticClass:"form-control",attrs:{type:"text",id:"db_name"},domProps:{value:t.config.db_name},on:{input:function(e){e.target.composing||t.$set(t.config,"db_name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"db_host"}},[t._v("Database IP")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.db_host,expression:"config.db_host"}],staticClass:"form-control",attrs:{type:"text",id:"db_host"},domProps:{value:t.config.db_host},on:{input:function(e){e.target.composing||t.$set(t.config,"db_host",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"db_port"}},[t._v("Database Port")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.db_port,expression:"config.db_port"}],staticClass:"form-control",attrs:{type:"text",id:"db_port"},domProps:{value:t.config.db_port},on:{input:function(e){e.target.composing||t.$set(t.config,"db_port",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"db_username"}},[t._v("Database Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.db_username,expression:"config.db_username"}],staticClass:"form-control",attrs:{type:"text",id:"db_username"},domProps:{value:t.config.db_username},on:{input:function(e){e.target.composing||t.$set(t.config,"db_username",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"db_password"}},[t._v("Database Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.db_password,expression:"config.db_password"}],staticClass:"form-control",attrs:{type:"text",id:"db_password"},domProps:{value:t.config.db_password},on:{input:function(e){e.target.composing||t.$set(t.config,"db_password",e.target.value)}}})]),a("hr"),a("button",{staticClass:"btn btn-success btn-quatek",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit()}}},[t._v("OK")])])},Jt=[],Bt={data:function(){return{config:{db_type:"",db_name:"",db_host:"",db_port:"",db_username:"",db_password:""}}},methods:{submit:function(){console.log(this.config),N.a.post("/update-other-database-config",this.config).then(function(t){console.log(t.data),alert("Save successfully!")}).catch(function(t){console.log(t),alert("Save failed!")})},get_other_database_config:function(){var t=this;N.a.get("/get-other-database-config").then(function(e){console.log(e.data),t.config=e.data}).catch(function(t){console.log(t)})}},created:function(){this.get_other_database_config()}},Wt=Bt,Vt=(a("4d7d"),Object(m["a"])(Wt,Rt,Jt,!1,null,"68515767",null)),Qt=Vt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("button",{staticClass:"btn btn-success btn-block btn-quatek",attrs:{type:"button",disabled:t.is_button_disabled},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.delete_all_cards()}}},[t._v("Delete card information on the gate")]),a("br"),a("br"),a("button",{staticClass:"btn btn-success btn-block btn-quatek",attrs:{type:"button",disabled:t.is_button_disabled},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.sync_cards()}}},[t._v("Synchronize card information")])])},Xt=[],te={data:function(){return{is_button_disabled:!1}},methods:{sync_cards:function(){var t=this;this.is_button_disabled=!0,N.a.post("/sync-cards").then(function(t){console.log(t.data)}).catch(function(t){console.log(t)}),setTimeout(function(){t.is_button_disabled=!1},3e4)},delete_all_cards:function(){var t=this;this.is_button_disabled=!0,N.a.post("/delete-all-cards").then(function(t){console.log(t.data)}).catch(function(t){console.log(t)}),setTimeout(function(){t.is_button_disabled=!1},3e4)}},created:function(){}},ee=te,ae=(a("c669"),Object(m["a"])(ee,Zt,Xt,!1,null,"099ef9f4",null)),se=ae.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("table",{staticClass:"table table-striped"},[t._m(0),t._l(t.getLastFailedUpload,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e[0]))]),a("td",[t._v(t._s(e[1]))])])})],2)])},ne=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("#")]),a("td",[t._v("Example")]),a("td",[t._v("ERROR")])])}],re={computed:Object(r["a"])({},Object(l["c"])(["getLastFailedUpload"]),{myOwn:function(){return null}}),methods:Object(r["a"])({},Object(l["d"])(["setLastFailedUpload"]),{myOwnMethod:function(){return null}})},ie=re,ce=Object(m["a"])(ie,oe,ne,!1,null,"4d9f7636",null),le=ce.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"card card-container login-card"},[a("form",{staticClass:"form-signin"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"inputEmail",placeholder:"Username",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("br"),a("button",{staticClass:"btn btn-lg btn-success btn-block btn-signin btn-quatek",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.login({username:t.username,password:t.password})}}},[t._v("Login")])])])])},ue=[],me={name:"login",data:function(){return{username:"",password:""}},props:{},methods:Object(r["a"])({},Object(l["b"])(["login"])),components:{}},_e=me,pe=(a("c25d"),Object(m["a"])(_e,de,ue,!1,null,"2170efc0",null)),fe=pe.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{staticClass:"form-inline"},[a("label",{staticClass:"sr-only",attrs:{for:"class_time_name"}},[t._v("Class name")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.class_time_name,expression:"class_time_name"}],staticClass:"form-control",attrs:{type:"text",id:"class_time_name",placeholder:"Class name"},domProps:{value:t.class_time_name},on:{input:function(e){e.target.composing||(t.class_time_name=e.target.value)}}})]),a("label",{staticClass:"sr-only",attrs:{for:"class_time_from"}},[t._v("The star time of the class")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.class_time_from,expression:"class_time_from"}],staticClass:"form-control",attrs:{type:"text",id:"class_time_from",placeholder:"The star time of the class"},domProps:{value:t.class_time_from},on:{input:function(e){e.target.composing||(t.class_time_from=e.target.value)}}})]),a("label",{staticClass:"sr-only",attrs:{for:"class_time_to"}},[t._v("The end time of the class")]),a("div",{staticClass:"input-group mb-2 mr-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.class_time_to,expression:"class_time_to"}],staticClass:"form-control",attrs:{type:"text",id:"class_time_to",placeholder:"The end time of the class"},domProps:{value:t.class_time_to},on:{input:function(e){e.target.composing||(t.class_time_to=e.target.value)}}})]),a("button",{staticClass:"btn btn-success mb-2 btn_quatek",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit()}}},[t._v("添加")])]),a("br"),a("div",[a("div",{staticClass:"row"},[a("table",{staticClass:"table table-striped table-responsive-md"},[t._m(0),t.class_times.length?t._e():a("tbody",[t._m(1)]),t.class_times.length?a("tbody",t._l(t.class_times,function(e){return a("tr",{key:e._id.$oid},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.working_time_from))]),a("td",[t._v(t._s(e.working_time_to))]),a("td",[a("button",{staticClass:"btn btn-secondary btn-quatek btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delete_class_time(e._id.$oid)}}},[a("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])}),0):t._e()])])])])},ge=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Class name")]),a("th",{attrs:{scope:"col"}},[t._v("Start Time")]),a("th",{attrs:{scope:"col"}},[t._v("End Time")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("No class found")])])}],be={data:function(){return{class_times:[],class_time_name:"",class_time_from:"",class_time_to:""}},computed:{},methods:{submit:function(){var t=this;0!=this.class_time_name.length&&(N.a.post("/add-class-time",{class_time_name:this.class_time_name,class_time_from:this.class_time_from,class_time_to:this.class_time_to}).then(function(e){console.log(e.data),t.class_time_name="",t.class_time_from="",t.class_time_to="",t.get_class_times()}).catch(function(t){console.log(t)}),console.log(this.interval_task))},delete_class_time:function(t){var e=this;N.a.post("/delete-class-time",{class_time_id:t}).then(function(t){console.log(t.data),e.get_class_times()}).catch(function(t){console.log(t)})},get_class_times:function(){var t=this;N.a.get("/get-class-times").then(function(e){console.log(e),t.class_times=e.data}).catch(function(t){console.log(t)})}},created:function(){this.get_class_times()}},he=be,ye=(a("df0d"),Object(m["a"])(he,ve,ge,!1,null,"50861f24",null)),Ce=ye.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("label",[t._v("1. Card number conversion tool")]),a("br"),a("small",[t._v("Please put the HID card number in the first column of the excel file")]),a("br"),a("br"),a("input",{ref:"hid_excel_file",attrs:{type:"file",name:"hid_excel_file",id:"hid_excel_file"}}),a("button",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit_hid_excel_file()}}},[t._v("submit ")])])])},we=[],xe={data:function(){return{}},methods:{submit_hid_excel_file:function(){var t=new FormData,e=this.$refs.hid_excel_file.files[0];t.append("hid_excel_file",e),N.a.post("/hid_card_convertor",t,{responseType:"blob",headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t.data),H()(t.data,"HID转换.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}).catch(function(t){console.log(t)})}}},Pe=xe,$e=Object(m["a"])(Pe,ke,we,!1,null,null,null),Ne=$e.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("table",{staticClass:"table"},[t._m(0),t._l(t.get_logs,function(e){return a("tr",{key:e.log_id},[a("td",[t._v(t._s(e.log_id))]),a("td",[t._v(t._s(e.card_number))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.job_number))]),a("td",[t._v(t._s(e.card_category))]),a("td",[t._v(t._s(e.in_out_symbol))]),a("td",[t._v(t._s(e.mc_id))]),a("td",[t._v(t._s(t._f("moment")(e.test_datetime,"YYYY-MM-DD HH:mm:ss")))]),a("td",[t._v(t._s(e.test_result))]),a("td",[t._v(t._s(e.is_tested))]),a("td",[t._v(t._s(e.hand))]),a("td",[t._v(t._s(e.left_foot))]),a("td",[t._v(t._s(e.right_foot))])])})],2)])},Se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("Log ID")]),a("td",[t._v("Card Number")]),a("td",[t._v("Name")]),a("td",[t._v("Job Number")]),a("td",[t._v("Card Category")]),a("td",[t._v("In/Out")]),a("td",[t._v("MC ID")]),a("td",[t._v("Time")]),a("td",[t._v("Teat Result")]),a("td",[t._v("Whether to Test")]),a("td",[t._v("Wrist Strap Data")]),a("td",[t._v("Left Shoes Data")]),a("td",[t._v("Right Shoes Data")])])}],De={data:function(){return{}},computed:Object(r["a"])({},Object(l["c"])(["get_logs"]))},Oe=De,Te=Object(m["a"])(Oe,je,Se,!1,null,null,null),Ee=Te.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_type"}},[t._v("Database Type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_type,expression:"config.update_db_type"}],staticClass:"form-control",attrs:{name:"update_db_type",id:"update_db_type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.config,"update_db_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("------------")]),a("option",{attrs:{value:"oracle"}},[t._v("Oracle")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_name"}},[t._v("Database Name/Example/SID")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_name,expression:"config.update_db_name"}],staticClass:"form-control",attrs:{type:"text",id:"update_db_name"},domProps:{value:t.config.update_db_name},on:{input:function(e){e.target.composing||t.$set(t.config,"update_db_name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_host"}},[t._v("Database IP")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_host,expression:"config.update_db_host"}],staticClass:"form-control",attrs:{type:"text",id:"update_db_host"},domProps:{value:t.config.update_db_host},on:{input:function(e){e.target.composing||t.$set(t.config,"update_db_host",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_port"}},[t._v("Database Port")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_port,expression:"config.update_db_port"}],staticClass:"form-control",attrs:{type:"text",id:"update_db_port"},domProps:{value:t.config.update_db_port},on:{input:function(e){e.target.composing||t.$set(t.config,"update_db_port",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_username"}},[t._v("Database Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_username,expression:"config.update_db_username"}],staticClass:"form-control",attrs:{type:"text",id:"update_db_username"},domProps:{value:t.config.update_db_username},on:{input:function(e){e.target.composing||t.$set(t.config,"update_db_username",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_password"}},[t._v("Database Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_password,expression:"config.update_db_password"}],staticClass:"form-control",attrs:{type:"text",id:"update_db_password"},domProps:{value:t.config.update_db_password},on:{input:function(e){e.target.composing||t.$set(t.config,"update_db_password",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"update_db_table_name"}},[t._v("Database Table")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.update_db_table_name,expression:"config.update_db_table_name"}],staticClass:"form-control",attrs:{type:"text",id:"update_db_table_name"},domProps:{value:t.config.update_db_table_name},on:{input:function(e){e.target.composing||t.$set(t.config,"update_db_table_name",e.target.value)}}})]),a("hr"),a("button",{staticClass:"btn btn-success btn-quatek",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submit()}}},[t._v("\n    OK\n  ")]),a("button",{staticClass:"btn btn-success btn-quatek",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.sync()}}},[t._v("\n    Manual synchronization\n  ")])])},Ae=[],Ie={data:function(){return{config:{update_db_type:"",update_db_name:"",update_db_host:"",update_db_port:"",update_db_username:"",update_db_password:"",update_db_table_name:""}}},methods:{submit:function(){console.log(this.config),N.a.post("/update-update-database-config",this.config).then(function(t){console.log(t.data),alert("Save successfully!")}).catch(function(t){console.log(t),alert("Save failed!")})},sync:function(){N.a.post("/manual-update-database").then(function(t){console.log(t.data),alert("Receive synchronization instruction!")}).catch(function(t){console.log(t),alert("Synchronization instruction failed!")})},get_update_database_config:function(){var t=this;N.a.get("/get-update-database-config").then(function(e){console.log(e.data),t.config.update_db_type=e.data.update_db_type?e.data.update_db_type:"",t.config.update_db_name=e.data.update_db_name?e.data.update_db_name:"",t.config.update_db_host=e.data.update_db_host?e.data.update_db_host:"",t.config.update_db_port=e.data.update_db_port?e.data.update_db_port:"",t.config.update_db_username=e.data.update_db_username?e.data.update_db_username:"",t.config.update_db_password=e.data.update_db_password?e.data.update_db_password:"",t.config.update_db_table_name=e.data.update_db_table_name?e.data.update_db_table_name:""}).catch(function(t){console.log(t)})}},created:function(){this.get_update_database_config()}},Me=Ie,Ue=(a("1d4a"),Object(m["a"])(Me,qe,Ae,!1,null,"3bf4de6f",null)),He=Ue.exports;s["default"].use(P["a"]);var Fe=new P["a"]({mode:"history",routes:[{path:"/",name:"Index",component:A},{path:"/gates",name:"Gates",component:W},{path:"/cards",name:"Cards",component:st},{path:"/card-create/",name:"CardCreate",component:lt},{path:"/card-edit/:card_id",name:"CardEdit",component:lt},{path:"/card-tests",name:"CardTests",component:ft},{path:"/attendances",name:"Attendances",component:Ct},{path:"/login",name:"login",component:fe},{path:"/last-failed-upload",name:"LastFailedUpload",component:le},{path:"/real-time-data",name:"real_time_data",component:Ee},{path:"/config",name:"Config",component:Nt,children:[{path:"system-config",name:"system-config",component:Kt},{path:"interval-task",name:"interval-task",component:Et},{path:"crontab-task",name:"crontab-task",component:Ht},{path:"other-database",name:"other-database",component:Qt},{path:"background-task",name:"background-task",component:se},{path:"class-time-config",name:"class-time-config",component:Ce},{path:"card_number_convertor_config",name:"card_number_convertor_config",component:Ne},{path:"update-cards-from-other-database",name:"update-cards-from-other-database",component:He}]}]});Fe.beforeEach(function(t,e,a){var s=["Gates","Cards","CardCreate","CardEdit","Config","class-time-config","background-task","other-database","crontab-task","interval-task","system-config","card_number_convertor_config"];s.includes(t.name)?S.getters.is_authenticated?a():a({name:"Index"}):a()});var Ye=a("9483");Object(Ye["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Ge=a("5f5b"),ze=(a("f9e3"),a("2dd8"),a("ecee")),Le=a("c074"),Ke=a("ad3d"),Re=a("2ead"),Je=a.n(Re),Be=a("859b"),We=a.n(Be),Ve=(a("d355"),"10.1.6.136"),Qe="5001",Ze=a("5132"),Xe=a.n(Ze);s["default"].use(Ge["a"]),s["default"].use(Je.a),s["default"].use(We.a),N.a.defaults.baseURL="http://".concat(Ve,":").concat(Qe),console.log("backend: "+"http://".concat(Ve,":").concat(Qe)),ze["c"].add(Le["c"],Le["i"],Le["f"],Le["k"],Le["d"],Le["l"],Le["g"],Le["j"],Le["a"],Le["b"],Le["h"],Le["e"]),s["default"].component("font-awesome-icon",Ke["a"]),s["default"].config.productionTip=!1,s["default"].use(new Xe.a({debug:!1,connection:"http://".concat(Ve,":").concat(Qe),vuex:{store:S,actionPrefix:"SOCKETIO_",mutationPrefix:"SOCKETIO_"}})),new s["default"]({router:Fe,store:S,render:function(t){return t(x)}}).$mount("#app")},5991:function(t,e,a){},"5c4a":function(t,e,a){"use strict";var s=a("a1b5"),o=a.n(s);o.a},"64a9":function(t,e,a){},"6b70":function(t,e,a){},7004:function(t,e,a){"use strict";var s=a("1f0e"),o=a.n(s);o.a},"77ac":function(t,e,a){"use strict";var s=a("ff6f"),o=a.n(s);o.a},"80fc":function(t,e,a){},"86f8":function(t,e,a){"use strict";var s=a("3f28"),o=a.n(s);o.a},"89b4":function(t,e,a){},"9184b":function(t,e,a){},a1b5:function(t,e,a){},a474:function(t,e,a){"use strict";var s=a("da6c"),o=a.n(s);o.a},ac1e:function(t,e,a){},b902:function(t,e,a){"use strict";var s=a("6b70"),o=a.n(s);o.a},c18c:function(t,e,a){},c25d:function(t,e,a){"use strict";var s=a("9184b"),o=a.n(s);o.a},c669:function(t,e,a){"use strict";var s=a("376d"),o=a.n(s);o.a},c822:function(t,e,a){"use strict";var s=a("4195"),o=a.n(s);o.a},cdcc:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"img/logo.bf36c058.png"},da6c:function(t,e,a){},df0d:function(t,e,a){"use strict";var s=a("cdcc"),o=a.n(s);o.a},e061:function(t,e,a){"use strict";var s=a("473b"),o=a.n(s);o.a},e8bf:function(t,e,a){"use strict";var s=a("5991"),o=a.n(s);o.a},fc24:function(t,e,a){"use strict";var s=a("ff54"),o=a.n(s);o.a},ff54:function(t,e,a){},ff6f:function(t,e,a){}});
//# sourceMappingURL=app.bb3e07e2.js.map